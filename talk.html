<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <title>From idea to web</title>
    <link rel="stylesheet" href="static/css/remark.css">
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse
layout: true
---
# Examples
* GH actions for pre-commit &amp; tests
* docker-compose.yaml
* Dockerfile
* Terraform (project, cloudrun, gcs, secrets,)
* deploy.sh (use tf apply)
---

# From idea to web
Friendly introduction into DevOps.

.footnote[[@flaper87](https://twitter.com/flaper87) / [@honzakral](https://twitter.com/honzakral)]
---
# You need a website
???
* what can be a website?
* we assume you want to have something public on the internet
* you can pay a few $$/month
---
# Chapter 0 - YAGNI
Github pages FTW!
???
* Maybe static generator is enough?
* For a website that is updated every hour it is still good enough
---
# Chapter 1 - Code
Just use Django
???
* easy to start with
* lots of resources
---
layout: false
.left-column[
# Local Development
]
--
.right-column[
### Dependencies

* `Poetry` for Python
]
--
.right-column[
### Configuration

* `.env` file (`.gitignore`d!)
]

--
.right-column[
### Tools

* `pre-commit` to keep you honest
* Tests to speed up development
* `pytest` for tests (with `pytest-django`)
]
--
.right-column[
### CI

* replicate everything on Github
* Actions running `pre-commit` and your tests
]
---
layout: true
class: center, middle, inverse
---
# All this before first line of Application code
---
# Chapter 2 - Data
Do you actually need a DB?
???
* it is assumed as default in most tutorials
* maybe just a `yaml` file is enough? Or a python dict?
---
# RDBMS ?
There is no silver bullet
???
* Again considered default
* good for generic data but often overkill
* SQLite can carry you a long way
* maybe a cloud hosted DB instead like xata, firebase?
---
# Queries, not data
Think about what you want to do, not what the data *is*.
???
* both for picking a DB and creating a schema
---
# Run dependencies in Docker
Dependencies only!
???
* `docker-compose` to configure ports etc
* do not run python in docker
* run python manually!
---
# Chapter 3 - Going live!
Time to deploy

---
layout: false
.left-column[
# Infrastructure
...as code!
]
.right-column[
### Code for deployment

* `Dockerfile`
* CloudRun/ECS
]
--
.right-column[
### Use Services

* RDS/Cloud SQL for RDBMS
* S3/GCS for static files
]
--
.right-column[
### Use Code to provision

* Terraform FTW
* OK to run manually
* Iterate like with code
]
???
* assume clean slate
* DNS, google project, cloud run, ...
--
.right-column[
### Secrets

* Cloud Secret Manager
]
---
layout: true
class: center, middle, inverse
---
# `deploy.sh`
**One** command to rule them all
???
* Build image
* upload to registry
* deploy to ecs/cloudrun
---
# Staging Environment
Resources in Terraform, flag for `deploy.sh`
---
# YAGNI 2.0 - k8s edition
Back away slowly and maintain eye contact
---
# Continuous Delivery
Automate what can be automated
???
* when adding another person
* recreate deploy.sh in GH actions
* use GH secrets for credentials
---
# Chapter 4 - Day 2
---
layout: false
.left-column[
# Observability
Keep it up!
]
--
.right-column[
### Backups!

* untested backup doesn't count!
]
--
.right-column[
### Monitoring

* Simple uptime monitoring is enough (tm)
]
--
.right-column[
### Debugging

* Error reporting (Sentry)
* APM (Sentry)
]
---
layout: true
class: center, middle, inverse
---
# Thanks!
[@flaper87](https://twitter.com/flaper87) / [@honzakral](https://twitter.com/honzakral)

.footnote[Slideshow created using [remark](http://github.com/gnab/remark).]


    </textarea>
    <script src="static/js/remark-latest.min.js"></script>
    <script>
      var hljs = remark.highlighter.engine;
    </script>
    <script src="static/js/remark.language.js"></script>
    <script>
      var slideshow = remark.create({
          highlightStyle: 'monokai',
          highlightLanguage: 'remark',
          highlightLines: true,
          ratio: '16:9',
          slideNumberFormat: ''
        }) ;
    </script>
  </body>
</html>
